import {ConfigService} from '@nestjs/config';

export type ClickRedirectParams = {
    amount: number;
    planId: string;
    userId: string;
    selectedSport?: string
};
const CLICK_URL = `https://my.click.uz`;
const BOT_URL = 'https://t.me/sportsuz_premium_bot';

export function getClickRedirectLink(params: ClickRedirectParams) {
    const configService = new ConfigService();
    const serviceId = configService.get<number>('CLICK_SERVICE_ID');
    const merchantId = configService.get<string>('CLICK_MERCHANT_ID');


    return `${CLICK_URL}/services/pay?service_id=${serviceId}&merchant_id=${merchantId}&amount=${params.amount}&transaction_param=${params.planId}&additional_param3=${params.userId}&additional_param4=${params.selectedSport}&return_url=${BOT_URL}`;
}
https://my.click.uz/services/pay?service_id=66888&merchant_id=25923&amount=$10000&transaction_param=e63e4452-e942-488a-928c-4762faf64f84&additional_param3=${params.userId}&additional_param4=${params.selectedSport}&return_url=${BOT_URL}
